{"version":3,"file":"types.js","sourceRoot":"","sources":["../src/types.ts"],"names":[],"mappings":"AAAA,0CAA0C","sourcesContent":["// Type definitions for LoqaExpoDsp module\n\n/**\n * Configuration options for FFT computation\n *\n * @example\n * ```typescript\n * const options: FFTOptions = {\n *   fftSize: 2048,           // Power of 2 between 256-8192\n *   windowType: 'hanning',   // Reduces spectral leakage\n *   includePhase: false      // Omit phase for performance\n * };\n * ```\n */\nexport interface FFTOptions {\n  /**\n   * FFT size (must be power of 2, range: 256-8192).\n   * Defaults to buffer length. Larger sizes provide better frequency resolution\n   * but lower time resolution.\n   */\n  fftSize?: number;\n  /**\n   * Window function type. Defaults to 'hanning'.\n   * - 'hanning': Good general-purpose window (default)\n   * - 'hamming': Similar to Hanning, slightly different sidelobe behavior\n   * - 'blackman': Better frequency resolution, more attenuation\n   * - 'none': Rectangular window (use only for perfect sine waves)\n   */\n  windowType?: 'hanning' | 'hamming' | 'blackman' | 'none';\n  /**\n   * Return phase information. Defaults to false.\n   * Set to true only if you need phase data, as it increases computation time.\n   */\n  includePhase?: boolean;\n}\n\n/**\n * Result of FFT computation\n *\n * Contains frequency-domain representation of the input audio signal.\n *\n * @example\n * ```typescript\n * const result = await computeFFT(audioBuffer, { fftSize: 2048 });\n *\n * // Find peak frequency\n * const peakIndex = result.magnitude.indexOf(Math.max(...result.magnitude));\n * const peakFrequency = result.frequencies[peakIndex];\n * console.log(`Peak at ${peakFrequency} Hz`);\n * ```\n */\nexport interface FFTResult {\n  /**\n   * Magnitude spectrum (length = fftSize / 2)\n   *\n   * Each element represents the amplitude at the corresponding frequency.\n   * Higher values indicate stronger presence of that frequency component.\n   */\n  magnitude: Float32Array;\n  /**\n   * Phase spectrum (only present if includePhase: true)\n   *\n   * Each element represents the phase angle in radians at the corresponding frequency.\n   * Useful for signal reconstruction and phase-based analysis.\n   */\n  phase?: Float32Array;\n  /**\n   * Frequency bin centers in Hz\n   *\n   * Each element corresponds to the center frequency of each magnitude/phase bin.\n   * Use this array to map magnitude values to their frequencies.\n   */\n  frequencies: Float32Array;\n}\n\n/**\n * Configuration options for pitch detection\n */\nexport interface PitchDetectionOptions {\n  /** Sample rate in Hz */\n  sampleRate: number;\n  /** Minimum detectable frequency in Hz. Defaults to 80. */\n  minFrequency?: number;\n  /** Maximum detectable frequency in Hz. Defaults to 400. */\n  maxFrequency?: number;\n}\n\n/**\n * Result of pitch detection\n */\nexport interface PitchResult {\n  /** Detected pitch in Hz (or null if no pitch detected) */\n  frequency: number | null;\n  /** Confidence score (0-1) */\n  confidence: number;\n  /** Whether audio is voiced */\n  isVoiced: boolean;\n}\n\n/**\n * Configuration options for formant extraction\n */\nexport interface FormantExtractionOptions {\n  /** Sample rate in Hz */\n  sampleRate: number;\n  /** LPC order. Defaults to sampleRate / 1000 + 2. */\n  lpcOrder?: number;\n}\n\n/**\n * Result of formant extraction\n */\nexport interface FormantsResult {\n  /** First formant (F1) in Hz */\n  f1: number;\n  /** Second formant (F2) in Hz */\n  f2: number;\n  /** Third formant (F3) in Hz */\n  f3: number;\n  /** Formant bandwidths in Hz */\n  bandwidths: {\n    f1: number;\n    f2: number;\n    f3: number;\n  };\n}\n\n/**\n * Configuration options for spectrum analysis\n */\nexport interface SpectrumAnalysisOptions {\n  /** Sample rate in Hz */\n  sampleRate: number;\n}\n\n/**\n * Result of spectrum analysis\n */\nexport interface SpectrumResult {\n  /** Spectral centroid in Hz (brightness measure) */\n  centroid: number;\n  /** Spectral rolloff in Hz (95% energy threshold) */\n  rolloff: number;\n  /** Spectral tilt (slope of spectrum) */\n  tilt: number;\n}\n\n/**\n * Configuration options for HNR (Harmonics-to-Noise Ratio) calculation\n *\n * HNR measures the ratio of harmonic to noise energy in voice,\n * providing a quantitative measure of breathiness.\n *\n * @example\n * ```typescript\n * const options: HNROptions = {\n *   sampleRate: 44100,\n *   minFreq: 75,   // Minimum F0 to search\n *   maxFreq: 500   // Maximum F0 to search\n * };\n * ```\n */\nexport interface HNROptions {\n  /** Sample rate in Hz */\n  sampleRate: number;\n  /**\n   * Minimum fundamental frequency to search in Hz.\n   * Defaults to 75 Hz. Lower values may be needed for very low voices.\n   */\n  minFreq?: number;\n  /**\n   * Maximum fundamental frequency to search in Hz.\n   * Defaults to 500 Hz. Higher values may be needed for very high voices.\n   */\n  maxFreq?: number;\n}\n\n/**\n * Result of HNR (Harmonics-to-Noise Ratio) calculation\n *\n * HNR is the primary acoustic measure of breathiness:\n * - Higher HNR (18-25 dB): Clear, less breathy voice\n * - Lower HNR (12-18 dB): Softer, more breathy voice\n * - Very low HNR (<10 dB): Very breathy or pathological voice\n *\n * @example\n * ```typescript\n * const result = await calculateHNR(audioBuffer, { sampleRate: 44100 });\n *\n * if (result.isVoiced) {\n *   if (result.hnr > 20) {\n *     console.log('Clear voice detected');\n *   } else if (result.hnr < 15) {\n *     console.log('Breathy voice detected');\n *   }\n * }\n * ```\n */\nexport interface HNRResult {\n  /**\n   * Harmonics-to-Noise Ratio in decibels (dB).\n   *\n   * Typical ranges:\n   * - 12-18 dB: Breathy voice (e.g., soft, warm quality)\n   * - 18-25 dB: Clear voice (e.g., bright, crisp quality)\n   * - 0 dB: Returned for unvoiced signals\n   */\n  hnr: number;\n  /**\n   * Detected fundamental frequency in Hz.\n   *\n   * This is the F0 used for HNR calculation.\n   * Returns 0 if signal is unvoiced.\n   */\n  f0: number;\n  /**\n   * Whether the signal is voiced (periodic).\n   *\n   * If false, the signal is either unvoiced (noise, whisper)\n   * or below the voicing threshold.\n   */\n  isVoiced: boolean;\n}\n\n/**\n * Configuration options for H1-H2 amplitude difference calculation\n *\n * H1-H2 measures the difference between the first and second harmonic amplitudes,\n * correlating with vocal weight (lighter vs fuller voice quality).\n *\n * @example\n * ```typescript\n * const options: H1H2Options = {\n *   sampleRate: 44100,\n *   f0: 200  // Optional: provide pre-calculated F0 for efficiency\n * };\n * ```\n */\nexport interface H1H2Options {\n  /** Sample rate in Hz */\n  sampleRate: number;\n  /**\n   * Optional pre-calculated fundamental frequency in Hz.\n   *\n   * If provided, skips F0 detection (faster).\n   * If omitted or set to 0, F0 will be auto-detected.\n   * Use this if you've already called detectPitch().\n   */\n  f0?: number;\n}\n\n/**\n * Result of H1-H2 amplitude difference calculation\n *\n * H1-H2 is a key acoustic correlate of vocal weight:\n * - Higher H1-H2 (>5 dB): Lighter, breathier vocal quality\n * - Lower H1-H2 (<0 dB): Fuller, heavier vocal quality\n * - Moderate H1-H2 (0-5 dB): Balanced vocal weight\n *\n * @example\n * ```typescript\n * const result = await calculateH1H2(audioBuffer, { sampleRate: 44100 });\n *\n * if (result.h1h2 > 5) {\n *   console.log('Lighter voice detected');\n * } else if (result.h1h2 < 0) {\n *   console.log('Fuller voice detected');\n * }\n * ```\n */\nexport interface H1H2Result {\n  /**\n   * H1-H2 amplitude difference in decibels (dB).\n   *\n   * Calculated as: H1_amplitude_dB - H2_amplitude_dB\n   *\n   * Typical ranges:\n   * - >5 dB: Lighter, breathier quality\n   * - 0-5 dB: Balanced\n   * - <0 dB: Fuller, heavier quality\n   */\n  h1h2: number;\n  /**\n   * First harmonic (fundamental) amplitude in dB.\n   *\n   * This is the amplitude at the F0 frequency.\n   */\n  h1AmplitudeDb: number;\n  /**\n   * Second harmonic amplitude in dB.\n   *\n   * This is the amplitude at 2*F0 frequency.\n   */\n  h2AmplitudeDb: number;\n  /**\n   * Fundamental frequency used for calculation in Hz.\n   *\n   * Either the provided F0 or the auto-detected value.\n   */\n  f0: number;\n}\n"]}